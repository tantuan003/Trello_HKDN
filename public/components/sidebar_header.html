<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trello-like Sidebar & Header</title>
  <link rel="stylesheet" href="../css/sidebar_header.css?v=1" />
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header__inner">
        <div class="brand">
          <div class="brand__logo">T</div>
          <span class="brand__name">Teamhub</span>
        </div>

        <div class="searchbar">
          <!-- icon search -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="11" cy="11" r="7" stroke-width="2"></circle>
            <path d="M20 20L17 17" stroke-width="2" stroke-linecap="round"></path>
          </svg>
          <input type="text" placeholder="Search" />
        </div>

        <div class="actions">
          <button class="btn">Create</button>
          <button class="icon-btn" aria-label="Notifications">üîî</button>
          <div class="avatar"></div>
        </div>
      </div>
    </header>

    <!-- Main -->
    <div class="main">
      <!-- Sidebar -->
      <aside class="sidebar">
        <nav class="nav" id="sideNav">
    <a href="#boards" class="nav-item" data-target="boards">
      <span class="nav-ic">
        <!-- Boards icon -->
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <path d="M4 5h16a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z" fill="none" stroke="currentColor" stroke-width="1.8" />
          <rect x="6" y="7" width="5.5" height="10" rx="1.2" fill="currentColor" />
          <rect x="12.5" y="7" width="5.5" height="6" rx="1.2" fill="currentColor" opacity=".35"/>
        </svg>
      </span>
      <span>Boards</span>
    </a>

    <a href="#templates" class="nav-item" data-target="templates">
      <span class="nav-ic">
        <!-- Templates icon -->
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <rect x="3" y="4" width="18" height="16" rx="2" fill="none" stroke="currentColor" stroke-width="1.8"/>
          <path d="M7 8h10M7 12h10M7 16h6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
      </span>
      <span>Templates</span>
    </a>

    <a href="#home" class="nav-item" data-target="home">
      <span class="nav-ic">
        <!-- Home icon -->
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <path d="M4 12c2-2 4-3 8-3s6 1 8 3" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M4 16c2-2 4-3 8-3s6 1 8 3" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" opacity=".6"/>
        </svg>
      </span>
      <span>Home</span>
    </a>
  </nav>

  <div class="divider"></div>

        <section class="workspaces" id="wsp">
          <h4>Workspaces</h4>

          <button class="wsp-head" type="button" id="wspToggle" aria-expanded="true">
            <span class="wsp-badge">T</span>
            <span class="wsp-name">Teamhub Workspace</span>
            <span class="chev" aria-hidden="true"></span>
          </button>

          <ul class="wsp-menu">
            <li><a href="#"><span class="wsp-ic">üìÑ</span>Boards</a></li>
            <li><a href="#"><span class="wsp-ic">üë•</span>Members</a></li>
            <li><a href="#"><span class="wsp-ic">‚öôÔ∏è</span>Settings</a></li>
          </ul>
        </section>
      </aside>

      <!-- Content -->
      <main class="content">
        <div class="empty-state"></div>
      </main>
    </div>
  </div>

  <script>
    const wsp = document.getElementById('wsp');
    const btn = document.getElementById('wspToggle');
    btn?.addEventListener('click', () => {
      const collapsed = wsp.classList.toggle('is-collapsed');
      btn.setAttribute('aria-expanded', String(!collapsed));
    });
  </script>
  <script>
  // click => scroll m∆∞·ª£t + set active
  const links = [...document.querySelectorAll('#sideNav .nav-item')];
  const byId = id => document.getElementById(id);

  links.forEach(a => {
    a.addEventListener('click', (e) => {
      e.preventDefault();
      const id = a.dataset.target;
      const target = byId(id);
      if (!target) return;

      // scroll t·ªõi section (ƒë√£ tr·ª´ header 60px)
      const headerH = 60;
      const top = target.getBoundingClientRect().top + window.pageYOffset - headerH;
      window.scrollTo({ top, behavior: 'smooth' });

      // set active th·ªß c√¥ng (ƒë·∫£m b·∫£o gi·ªØ s√°ng ngay)
      setActive(id);
    });
  });

  function setActive(id){
    links.forEach(el => el.classList.toggle('is-active', el.dataset.target === id));
  }

  // Auto-update active khi cu·ªôn (IntersectionObserver)
  const observer = new IntersectionObserver((entries) => {
    // ch·ªçn section hi·ªán di·ªán nhi·ªÅu nh·∫•t
    const visible = entries
      .filter(e => e.isIntersecting)
      .sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
    if (!visible) return;
    setActive(visible.target.id);
  }, { rootMargin: "-62px 0px -60% 0px", threshold: [0.2, 0.4, 0.6] });

  ['boards','templates','home'].forEach(id=>{
    const el = byId(id);
    if (el) observer.observe(el);
  });

  // M·∫∑c ƒë·ªãnh: kh√¥ng active g√¨ c·∫£ (theo y√™u c·∫ßu)
  // N·∫øu mu·ªën auto-active m·ª•c ƒë·∫ßu khi ch·∫°m section, c·ª© scroll t√Ω l√† b·∫≠t.
</script>

</body>
</html>
